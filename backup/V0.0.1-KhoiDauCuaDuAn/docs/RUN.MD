# ğŸš€ HÆ°á»›ng Dáº«n Khá»Ÿi Äá»™ng Há»‡ Thá»‘ng

## ğŸ—ï¸ Cáº¥u trÃºc há»‡ thá»‘ng
```
â”œâ”€â”€ load-balancer/          # Dá»‹ch vá»¥ Ä‘iá»u phá»‘i ngÆ°á»i dÃ¹ng ğŸ”„
â”‚   â”œâ”€â”€ index.js           # Logic load balancing vá»›i health check ğŸ§ª
â”‚   â””â”€â”€ package.json       # Dependencies ğŸ“¦
â”œâ”€â”€ web-servers/            # CÃ¡c mÃ¡y chá»§ xá»­ lÃ½ yÃªu cáº§u ğŸŒ
â”‚   â”œâ”€â”€ server1.js         # Web server chÃ­nh (cá»•ng 21000) ğŸ’»
â”‚   â””â”€â”€ package.json       # Dependencies ğŸ“¦
â”œâ”€â”€ db-services/            # Dá»‹ch vá»¥ quáº£n lÃ½ CSDL ğŸ’¾
â”‚   â”œâ”€â”€ index.js           # Logic CSDL (cá»•ng 29000) ğŸ’¾
â”‚   â””â”€â”€ package.json       # Dependencies ğŸ“¦
â””â”€â”€ docs/                   # TÃ i liá»‡u há»‡ thá»‘ng ğŸ“š
    â”œâ”€â”€ README.MD          # Tá»•ng quan há»‡ thá»‘ng ğŸ“‹
    â”œâ”€â”€ UI.MD              # Giao diá»‡n ngÆ°á»i dÃ¹ng ğŸ¨
    â”œâ”€â”€ CHANGELOG.MD       # Nháº­t kÃ½ thay Ä‘á»•i ğŸ“
    â””â”€â”€ RUN.MD             # HÆ°á»›ng dáº«n khá»Ÿi Ä‘á»™ng (báº¡n Ä‘ang Ä‘á»c file nÃ y) ğŸ“–
```

## ğŸ› ï¸ YÃªu cáº§u há»‡ thá»‘ng
- Node.js v18+ ğŸ’»
- NPM ğŸ“¦

## ğŸš€ CÃ¡ch khá»Ÿi Ä‘á»™ng há»‡ thá»‘ng

### 1. CÃ i Ä‘áº·t dependencies ğŸ“¦
```bash
cd load-balancer && npm install
cd ../web-servers && npm install
cd ../db-services && npm install
```

### 2. Khá»Ÿi Ä‘á»™ng cÃ¡c dá»‹ch vá»¥ (theo thá»© tá»±) âš™ï¸

#### B1: Khá»Ÿi Ä‘á»™ng Load Balancer (pháº£i cháº¡y TRÆ¯á»šC server) ğŸ”„
```bash
cd load-balancer
node index.js
```

#### B2: Khá»Ÿi Ä‘á»™ng Database Service ğŸ’¾
```bash
cd db-services
node index.js
```

#### B3: Khá»Ÿi Ä‘á»™ng Web Servers (sáº½ tá»± Ä‘á»™ng Ä‘Äƒng kÃ½ vá»›i Load Balancer) ğŸŒ
```bash
cd web-servers
node server1.js
```

### 3. Kiá»ƒm tra há»‡ thá»‘ng ğŸ§ª
- Truy cáº­p: http://localhost:20000 ğŸŒ
- Kiá»ƒm tra sá»©c khá»e: http://localhost:20000/health ğŸ§ª

## ğŸ“ˆ Cháº¡y trÃªn nhiá»u cá»•ng (má»Ÿ rá»™ng)
### Web Servers ğŸŒ
Äá»ƒ cháº¡y nhiá»u web server trÃªn cÃ¡c cá»•ng khÃ¡c nhau (cá»•ng báº¥t ká»³):
```bash
# Cá»•ng 21000 (máº·c Ä‘á»‹nh)
SERVER_ID=server1 PORT=21000 node server1.js

# Cá»•ng 21001
SERVER_ID=server2 PORT=21001 node server1.js

# Cá»•ng 30000 (báº¥t ká»³)
SERVER_ID=server3 PORT=30000 node server1.js
```

### Load Balancer (cÆ¡ cháº¿ Ä‘Äƒng kÃ½ mÃ¡y chá»§) ğŸ”„
Load Balancer sá»­ dá»¥ng cÆ¡ cháº¿ Ä‘Äƒng kÃ½ thay vÃ¬ quÃ©t cá»•ng:
- Web Server **tá»± Ä‘á»™ng Ä‘Äƒng kÃ½** khi khá»Ÿi Ä‘á»™ng âœ…
- Web Server **tá»± Ä‘á»™ng gá»¡ Ä‘Äƒng kÃ½** khi táº¯t ğŸ”„
- KhÃ´ng giá»›i háº¡n cá»•ng - Web Server cháº¡y á»Ÿ Ä‘Ã¢u, Load Balancer cÅ©ng nháº­n diá»‡n ğŸŒ
- Chá»‰ chuyá»ƒn tiáº¿p Ä‘áº¿n mÃ¡y chá»§ Ä‘Ã£ Ä‘Äƒng kÃ½ vÃ  Ä‘ang khá»e ğŸ’š

### DB Services ğŸ’¾
CSDL cháº¡y trÃªn cá»•ng tá»« 29000 trá»Ÿ Ä‘i:
- 29001: users_db ğŸ‘¤
- 29002: products_db ğŸ“¦
- 29003: orders_db ğŸ“‹

## ğŸ›‘ Dá»«ng há»‡ thá»‘ng
- DÃ¹ng `Ctrl+C` trÃªn tá»«ng terminal Ä‘ang cháº¡y dá»‹ch vá»¥ â¹ï¸
  - Web Server sáº½ **tá»± Ä‘á»™ng gá»¡ Ä‘Äƒng kÃ½** khá»i Load Balancer âœ…
- Hoáº·c cháº¡y lá»‡nh táº¯t toÃ n bá»™ há»‡ thá»‘ng:
  ```bash
  pkill -f "node.*load-balancer\|node.*web-servers\|node.*db-services"
  ```
  - Lá»‡nh nÃ y chá»‰ táº¯t cÃ¡c dá»‹ch vá»¥ trong há»‡ thá»‘ng (khÃ´ng áº£nh hÆ°á»Ÿng dá»‹ch vá»¥ khÃ¡c) ğŸ”§
- Hoáº·c táº¯t táº¥t cáº£ tiáº¿n trÃ¬nh Node.js (cáº©n trá»ng):
  ```bash
  pkill -f node
  ```
  - Web Server cÃ³ thá»ƒ khÃ´ng ká»‹p gá»¡ Ä‘Äƒng kÃ½ khá»i Load Balancer âš ï¸

## ğŸ“ Ghi chÃº
- Load Balancer sáº½ tá»± Ä‘á»™ng bá» qua cÃ¡c mÃ¡y chá»§ khÃ´ng pháº£n há»“i ğŸš«
- Health check Ä‘Æ°á»£c thá»±c hiá»‡n má»—i 10 giÃ¢y Ä‘á»ƒ cáº­p nháº­t tráº¡ng thÃ¡i mÃ¡y chá»§ ğŸ”„
- Load Balancer: cá»•ng 20000 ğŸ”„
- Web Servers: cá»•ng 21000-28000 ğŸŒ
- DB Services: cá»•ng 29000+ ğŸ’¾